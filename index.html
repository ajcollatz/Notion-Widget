<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AJ Widget</title>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Work Sans', sans-serif;
      background: transparent;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      color: #373530;
    }

    .widget {
      display: flex;
      align-items: center;
      gap: 20px;
      background: #fdfdfd; /* will be overwritten by JS */
      border-radius: 12px;
      padding: 24px 28px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      border: 1px solid rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.2s ease;
      max-width: 520px;
      width: 92vw;
    }

    .widget:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 14px rgba(0,0,0,0.15);
    }

    .avatar {
      font-size: 40px;
      flex-shrink: 0;
    }

    .text {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .greeting {
      font-weight: 700;
      font-size: 28px;
    }

    .affirmation {
      font-weight: 500;
      font-size: 20px;
    }

    .date-line {
      font-weight: 400;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <div class="widget">
    <div class="avatar">üåá</div>
    <div class="text">
      <div class="greeting" id="greeting">Good morning, AJ!</div>
      <div class="affirmation" id="affirmation">Today's Reminder üçÉ: You are capable of amazing things.</div>
      <div class="date-line" id="dateLine">Today is ‚Ä¶</div>
    </div>
  </div>

  <script>
    (function(){
      const name = "AJ!";
      const timeZone = "America/New_York";
      const affirmations = [
        "You are capable of amazing things.",
        "You deserve peace and clarity today.",
        "Your presence makes a difference.",
        "You are growing in the right direction.",
        "You have everything you need within you.",
        "You are allowed to take up space.",
        "You are doing better than you think.",
        "Today is full of possibilities for you.",
        "You radiate creativity and purpose.",
        "You can handle whatever today brings.",
        "You deserve joy, ease, and abundance.",
        "You are becoming who you‚Äôre meant to be.",
        "Your work and effort matter.",
        "You are worthy of good things.",
        "You bring value everywhere you go."
      ];

      const greetingEl = document.getElementById("greeting");
      const dateLineEl = document.getElementById("dateLine");
      const affirmationEl = document.getElementById("affirmation");
      const avatarEl = document.querySelector('.avatar');
      const widgetEl = document.querySelector('.widget');

      function getETHour(date){
        const parts = new Intl.DateTimeFormat("en-US",{timeZone,hour:'numeric',hour12:false}).formatToParts(date);
        for(const p of parts){ if(p.type==='hour') return parseInt(p.value,10); }
        return date.getHours();
      }

      function formatWithOrdinal(n){
        const v=n%100;
        if(v>=11 && v<=13) return n+'th';
        switch(n%10){case 1: return n+'st'; case 2: return n+'nd'; case 3: return n+'rd'; default: return n+'th';}
      }

      function formatFullDateET(date){
        const options = { timeZone: timeZone, year: 'numeric', month: 'long', day: 'numeric' };
        const formatted = date.toLocaleDateString('en-US', options);
        const [month, dayStr, year] = formatted.replace(',', '').split(' ');
        const day = parseInt(dayStr, 10);
        return `Today is ${month} ${formatWithOrdinal(day)}, ${year}`;
      }

      function getDayIndexFromET(date){
        const parts = new Intl.DateTimeFormat("en-US",{timeZone,year:'numeric',month:'numeric',day:'numeric'}).formatToParts(date);
        let year, month, day;
        for(const p of parts){
          if(p.type==='year') year=parseInt(p.value,10);
          if(p.type==='month') month=parseInt(p.value,10);
          if(p.type==='day') day=parseInt(p.value,10);
        }
        return Math.floor(Date.UTC(year, month-1, day)/86400000);
      }

      function getDailyAffirmation(date){
        const dayIndex = getDayIndexFromET(date);
        return "Today's Reminder üçÉ: "+affirmations[Math.abs(dayIndex)%affirmations.length];
      }

      function update(){
        const now = new Date();
        const hourET = getETHour(now);

        let greetingText, avatarEmoji, bgColor;

        if(hourET < 12){
          greetingText = "Good morning";
          avatarEmoji = "üåÖ";
          bgColor = "#FFF9E6";
        } else if(hourET < 17){
          greetingText = "Good afternoon";
          avatarEmoji = "üåû";
          bgColor = "#fff1e6";
        } else {
          greetingText = "Good evening";
          avatarEmoji = "üåá";
          bgColor = "#F0E6FF";
        }

        // Update widget content
        greetingEl.textContent = greetingTe
